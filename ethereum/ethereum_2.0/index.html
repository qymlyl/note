<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-ethereum/ethereum_2.0" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">ethereum_2.0 | qymlyl note</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://qymlyl.github.io/note/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://qymlyl.github.io/note/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://qymlyl.github.io/note/ethereum/ethereum_2.0"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ethereum_2.0 | qymlyl note"><meta data-rh="true" name="description" content="概述"><meta data-rh="true" property="og:description" content="概述"><link data-rh="true" rel="icon" href="/note/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://qymlyl.github.io/note/ethereum/ethereum_2.0"><link data-rh="true" rel="alternate" href="https://qymlyl.github.io/note/ethereum/ethereum_2.0" hreflang="en"><link data-rh="true" rel="alternate" href="https://qymlyl.github.io/note/zh-Hans/ethereum/ethereum_2.0" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://qymlyl.github.io/note/ethereum/ethereum_2.0" hreflang="x-default"><link rel="stylesheet" href="/note/assets/css/styles.75314c4a.css">
<link rel="preload" href="/note/assets/js/runtime~main.f22cf2f6.js" as="script">
<link rel="preload" href="/note/assets/js/main.c4a289da.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/note/"><div class="navbar__logo"><img src="/note/img/logo.svg" alt="qymlyl note Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/note/img/logo.svg" alt="qymlyl note Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">qymlyl note</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ethereum_2.0</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="概述">概述<a href="#概述" class="hash-link" aria-label="Direct link to 概述" title="Direct link to 概述">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="基本概念">基本概念<a href="#基本概念" class="hash-link" aria-label="Direct link to 基本概念" title="Direct link to 基本概念">​</a></h3><ul><li>验证者(Validator)：在PoS机制中，参与共识过程的绩点被称为验证者，而不是PoW中的矿工。验证者通过质押(Staking)一定数量的ETH（目前为32ETH）
来参与区块的验证和出块过程。</li><li>质押(Staking)：为了成为验证者，参与者需要锁定一定数量的ETH作为&quot;质押&quot;，这些质押的ETH将作为对验证者行为的经济保障，如果验证者不诚实(如验证错误
的区块)，将会受到惩罚，失去一部分或者全部质押的ETH。</li><li>委员会(Committee)和提议者(Proposer)：每个Epoch(约6.4分钟，包含32个Slot，每个Slot约12s), 系统会随机的选择一组验证者组成委员会，并从委员
会中选择一个提议者来提出新的区块，其他委员会成员则负责对提议的区块进行投票。</li><li>Epoch和Slot：以太坊2.0的时间被分为Epoch和Slot，这是时间管理和激励措施的基础。Slot是基本时间单位，每个Epoch包含32个Slot。</li><li>激励和处罚：验证者通过正确参与共识过程获得奖励，包括除快奖励和验证其他区块的奖励。如果验证者行为违反了协议(如双重投票或长时间不在线)，则可能收到处罚，
减少质押的ETH.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pos基本流程">PoS基本流程<a href="#pos基本流程" class="hash-link" aria-label="Direct link to PoS基本流程" title="Direct link to PoS基本流程">​</a></h3><ol><li>成为验证者：用户通过发送一个特殊交易，锁定32ETH到Beacon Chain的质押合约中，成为候选验证者。</li><li>随机选择：通过随机性算法，系统定期从所有验证者中选出委员会和提议者。</li><li>区块提议和验证：被选为提议者的验证者负责在其Slot中提出新的区块，委员会成员对提出的区块进行投票验证。</li><li>激励和处罚：参与共识过程的验证者根据其贡献获得奖励，不诚实或不活跃的验证者可能会被惩罚，包括减少质押的ETH。</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="委员会committee和提议者proposer的选出">委员会(Committee)和提议者(Proposer)的选出<a href="#委员会committee和提议者proposer的选出" class="hash-link" aria-label="Direct link to 委员会(Committee)和提议者(Proposer)的选出" title="Direct link to 委员会(Committee)和提议者(Proposer)的选出">​</a></h3><p><strong>委员会的选出</strong></p><ul><li>随机数的产生：通过一系列算法（如RANDAO加上可验证延迟函数VDF），在每个Epoch开始时产生一个不可预测且不可篡改的随机数。这个随机数对所有网络参与者都是公开和透明的。</li><li>全网共识：虽然随机数的产生依赖于参与的验证者，但一旦生成，它将在全网络中广播，并被所有验证者所知晓和接受。这意味着网络上的每个节点将使用相同的随机数进行下一步的计算。</li><li>委员会的选择：所有验证者使用这个随机数来独立计算出哪些验证者被选为当前Epoch的委员会成员。由于所有验证者都使用相同的随机数和算法，他们将独立地得出相同的委员会成员名单。</li><li>分配到分票：在以太坊2.0完全实现中(目前以太坊2.0正在逐步部署)，委员会会被分配到不同的分票，每一个分片有一个或多个委员会负责验证和提议区块。</li><li>周期性更新：每个epoch，委员会的组成都会更新一次，以保证网络的安全性和去中心化。</li></ul><p>协议设定了每个委员会中验证者数量的最小和最大限制。例如，在以太坊2.0的早期规范中，每个委员会至少需要128个验证者。这是为了确保即使在验证者数量较少的情况下，每个委员会也能具有足够的去中心化和安全性。</p><p><strong>提议者的选出</strong></p><ul><li>在委员会内选出：每个Slot开始时，从负责当前Slot的委员会中选出一个提议者。提议者的选出同样基于随机数，但具体算法可能依赖于客户端的实现细节。 </li><li>提议区块：被选出的提议者负责在其Slot中提出一个新的区块。如果提议者在指定的Slot时间内未能提出区块，那么这个Slot将不会有新的区块产生。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="epoch中slot的数量">Epoch中Slot的数量<a href="#epoch中slot的数量" class="hash-link" aria-label="Direct link to Epoch中Slot的数量" title="Direct link to Epoch中Slot的数量">​</a></h3><p>以太坊2.0中的每一个Epoch中包含固定的32个slot，这是由协议预先定义的。这个数量是根据网络的设计目标和安全性考虑来确定的，目的是为了平衡区块的产生速率、
网络延迟、以及链的安全性和活跃性。</p><p>以太坊2.0中，slot是时间管理的基本单位。大约每12s一个Slot，每个Slot都会被指定一个验证者作为提议者，该提议者有权利在该slot内提议一个新的块。</p><p>Epoch有32个slot，即每一个Epoch大约持续6.4分钟。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="随机数的产生">随机数的产生<a href="#随机数的产生" class="hash-link" aria-label="Direct link to 随机数的产生" title="Direct link to 随机数的产生">​</a></h3><p><strong>RANDAO</strong>（随机数作为数据的自治组织）</p><ul><li>过程：在每个epoch开始时，参与创建新epoch的每个验证者都需要提交一个“随机贡献”，这通常是一个他们选择的随机数的哈希值。这些贡献被组合在一起，
以生成一个epoch的随机种子。具体来说，每个验证者在注册成为验证者时，会提交一系列的哈希，每当验证者被选为某个epoch的提议者时，他们就揭示一个之
前提交的哈希的原始值，这些值被组合用于生成随机数。</li><li>特点：RANDAO机制确保了随机数的生成过程是参与性的和去中心化的，但是它依赖于验证者的诚实行为。如果一个验证者可以预测其他验证者的贡献，理论上
他们可以操纵自己的贡献以影响最终的随机数。</li></ul><p><strong>VDF</strong>（可验证延迟函数）</p><ul><li>目的：为了增强随机数的不可预测性和安全性，以太坊2.0计划在RANDAO基础上引入VDF。VDF是一种密码学函数，它需要一个固定数量的时间来计算输出，但验证输出的正确性却非常快速。这意味着一旦RANDAO生成一个初步的随机种子，它会被输入到VDF中，产生最终的随机数。</li><li>特点：使用VDF可以确保即使最后一个贡献者知道他们的贡献如何影响最终的随机种子，他们也无法在VDF计算完成之前知道最终的随机数，从而增强了随机数的不可操纵性和公平性。</li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#概述" class="table-of-contents__link toc-highlight">概述</a><ul><li><a href="#基本概念" class="table-of-contents__link toc-highlight">基本概念</a></li><li><a href="#pos基本流程" class="table-of-contents__link toc-highlight">PoS基本流程</a></li><li><a href="#委员会committee和提议者proposer的选出" class="table-of-contents__link toc-highlight">委员会(Committee)和提议者(Proposer)的选出</a></li><li><a href="#epoch中slot的数量" class="table-of-contents__link toc-highlight">Epoch中Slot的数量</a></li><li><a href="#随机数的产生" class="table-of-contents__link toc-highlight">随机数的产生</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 qymlyl note</div></div></div></footer></div>
<script src="/note/assets/js/runtime~main.f22cf2f6.js"></script>
<script src="/note/assets/js/main.c4a289da.js"></script>
</body>
</html>